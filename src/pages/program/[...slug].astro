---
import Layout from "../../layouts/Layout.astro";
import { fetchIndividualProgram } from "./fetchProgram";

const { slug } = Astro.params;

const session = await fetchIndividualProgram(slug);

const speakers = session?.speakers;


// const formatTime = (time: string): string => {
//   const [hours, minutes] = time.split('T')[1].split(':').slice(0, 2);
//   return `${parseInt(hours, 10)}:${minutes}`;
// };

// const startFormatted: string = formatTime(session?.startTime ?? "00:00");
// const endFormatted: string = formatTime(session?.endTime ?? "00:00");

---

<Layout title={session ? session.title : "Fant ingenting!"}>
  {session ? (
    <>
      <a href="/program">Back</a>
      <div class="bg-white mx-auto relative mt-4 p-5 border-black border-2 rounded-xl">
        <div class="pb-4">
          <h1>{session.title}</h1>
          <h3 class="p-0">Time and room: TBD</h3>
        </div>

        <div class="grid md:grid-cols-4 gap-12">
          <div class="md:col-span-3">
            <p>{session.abstract}</p>
            <h4 class="font-bold">Intended audience: </h4>
            <p>{session.intendedAudience}</p>
          </div>
          <div class="mt-3 font-bold gap-4">
            <h4>Type: {session.format}</h4>
            <h4>Language: {session.language === "no" ? "Norwegian" : "English"}</h4>
          </div>
        </div>
      </div>
      <div class="p-5">
        {speakers && speakers.map((speaker) => (
          <div>
            <h3>{speaker.name}</h3>
            <p>{speaker.bio}</p>
          </div>
        ))}
      </div>
    </>
  ) : (
    <p>Her var det tomt!</p>
  )}
</Layout>
